<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>修改个人信息</title>
    </h:head>
    <h:body>
        <h:form>  
            <a href="http://localhost:8080/BookTrading/"> <h:graphicImage style="position: absolute;left: 80px;top: 30px;width: 200px;height: 90px;"
                                                                          value="/resources/image/weblogo.png"/></a>

            <div class="ui-g-12 ui-md-4" style="position:absolute;left:370px;top:50px;">
                <div class="ui-inputgroup">
                    <p:inputText placeholder="请输入书名"  size="70"/>
                    <h:form>
                        <p:commandButton icon="pi pi-search"  action="aftersearch.xhtml" styleClass="white-button" />  
                    </h:form>

                </div>
            </div>
        </h:form>

        <h:form style="position:absolute;left:10px;top:100px;">

            <p:panelMenu style="padding-top:50px;margin-top:0px;width:300px">
                <p:submenu label="用户">
                    <p:menuitem value="我的信息"  outcome="/PERSON/personal_center.xhtml">
                    </p:menuitem>
                    <p:menuitem value="购物车" outcome="/PERSON/shopping_cart.xhtml">
                    </p:menuitem>
                </p:submenu>
            </p:panelMenu>
        </h:form>

        <p:breadCrumb style="float:right;width:800px;position:absolute;left:350px;top:150px;">
            <p:menuitem value="Categories" url="#" />
            <p:menuitem value="我的购物车" url="shopping_cart.xhtml" />
            
            <p:menuitem value="确认支付" url="confirm.xhtml" />
            <p:menuitem value="完成订单" url="pay.xhtml" />
        </p:breadCrumb>
        
        <h:form>
            <h:dataTable value="#{cartController.getCarts(registerService.userId)}" var="cart">
                <h:form style="float:right;width:800px;position:absolute;left:350px;top:200px;">
                    <p:growl id="msgs" showDetail="true" />
                    <p:panel id="basic" header="订单" style="margin-bottom:20px">

                </p:panel>
        </h:form>
                                        </h:dataTable>
                </h:form>
                

        <h:form style="float:right;width:800px;position:absolute;left:350px;top:200px;">
            <p:growl id="msgs" showDetail="true" />

            <p:panel id="basic" header="订单" style="margin-bottom:20px">
                <h:form>
                    <h:dataTable value="#{cartController.getCarts(userController.id)}" var="cart" cellspacing="40" id="list">
                        <h:column>            
                            <f:facet name="header">数量</f:facet>            
                                #{cart.cartAmount}

                        </h:column>
                        <h:column>            
                            <f:facet name="header"></f:facet>            
                       

                        </h:column>
                        
                        <h:column>            
                            <f:facet name="header">书名</f:facet>            
                                #{cart.goodgoodid.goodName}
                        </h:column>
                        <h:column>            
                            <f:facet name="header">单价</f:facet>            
                                #{cart.goodgoodid.goodPrice}
                        </h:column>
                        <h:column>            
                            <f:facet name="header">店铺名</f:facet>            
                                #{cart.goodgoodid.storestoreid.storeName}
                        </h:column>
                        <h:column>            
                            <f:facet name="header">总价</f:facet>            
                                #{cart.goodgoodid.goodPrice * cart.cartAmount}                        
                        </h:column>
                        <h:column>            
                            <f:facet name="header"></f:facet>                                  
                            <h:commandButton action="confirm.xhtml" value="支付"/>
                        </h:column>
                        <h:column>            
                            <f:facet name="header"></f:facet>                                  
                            <h:commandButton action="#{cartController.removeCart(cart)}" value="删除"/>
                        </h:column>
                    </h:dataTable>
                    <h:outputText value="#{cartController.total/5}"/>
                    <h:commandButton action="confirm.xhtml" value="全部支付" />
                </h:form>
            </p:panel>

        </h:form>

    </h:body>
</html>



